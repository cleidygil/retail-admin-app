<div mat-dialog-title>
  <span class="flex justify-center font-bold text-4xl text-neutral-600">
    Crear nuevo producto
  </span>
</div>
<div mat-dialog-content>
  <div class="max-w-xl self-center mx-auto bg-white p-2">
    <div class="flex flex-col justify-center w-full text-center">
      <p class="text-3xl font-semibold">Agrega una imagen de tu producto</p>
      <div class="flex justify-center items-center">
        <form
          [formGroup]="files"
          class="flex flex-col gap-4 my-2 justify-center w-full"
        >
          <div class="flex flex-col justify-center text-center">
            <label
              for="file"
              *ngIf="myFiles.length == 0"
              class="flex items-center w-32 h-32 rounded-full mx-auto bg-neutral-400 text-white"
            >
              <input
                type="file"
                name="file"
                id="file"
                class="sr-only"
                formControlName="file"
                [accept]="accept"
                (change)="seleccionarArchivo($event)"
              />

              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="h-24 w-24 text-white rounded-full mx-auto"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M12 4.5v15m7.5-7.5h-15"
                />
              </svg>
            </label>
            <ng-container *ngIf="myFiles.length > 0">
              <div
                *ngFor="let file of myFiles; index as i"
                class="rounded-md bg-[#F5F7FB] py-4 px-8"
              >
                <!-- Sección de vista previa de la foto -->
                <div
                  class="flex items-center justify-center mt-2"
                  *ngIf="file.preview"
                >
                  <img
                    [src]="file.preview"
                    alt="{{ file.name }}"
                    class="max-w-20 h-20"
                  />
                </div>
                <div class="flex items-center justify-between">
                  <span
                    class="truncate pr-3 text-base font-medium text-neutral-600"
                  >
                    {{ file.name }}
                  </span>
                  <button class="text-neutral-800" (click)="resetFile(i)">
                    <svg
                      width="10"
                      height="10"
                      viewBox="0 0 10 10"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M0.279337 0.279338C0.651787 -0.0931121 1.25565 -0.0931121 1.6281 0.279338L9.72066 8.3719C10.0931 8.74435 10.0931 9.34821 9.72066 9.72066C9.34821 10.0931 8.74435 10.0931 8.3719 9.72066L0.279337 1.6281C-0.0931125 1.25565 -0.0931125 0.651788 0.279337 0.279338Z"
                        fill="currentColor"
                      />
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M0.279337 9.72066C-0.0931125 9.34821 -0.0931125 8.74435 0.279337 8.3719L8.3719 0.279338C8.74435 -0.0931127 9.34821 -0.0931123 9.72066 0.279338C10.0931 0.651787 10.0931 1.25565 9.72066 1.6281L1.6281 9.72066C1.25565 10.0931 0.651787 10.0931 0.279337 9.72066Z"
                        fill="currentColor"
                      />
                    </svg>
                  </button>
                </div>
                <div
                  class="relative mt-5 h-[6px] w-full rounded-lg bg-[#E2E5EF]"
                >
                  <div
                    class="absolute left-0 right-0 h-full w-[100%] rounded-lg bg-orange-600"
                  ></div>
                </div>
              </div>
            </ng-container>
            <p class="pt-2 text-2xl font-semibold text-neutral-400">
              Formatos admitidos JPG y PNG
            </p>
          </div>
          <div class="flex flex-col justify-center text-center">
            <span>o carga la URL de la imagen</span>
            <div>
              <!-- <label for="company-website" class="block text-sm font-medium leading-6 text-gray-900">Company Website</label> -->
              <div class="mt-2 border-2 my-2 py-2 px-3 rounded-2xl">
                <div class="flex pl-2 outline-none border-none sm:max-w-md">
                  <span
                    class="flex select-none items-center pl-3 text-gray-500 sm:text-sm"
                    >http://</span
                  >
                  <input
                    formControlName="url"
                    type="text"
                    name="company-website"
                    id="company-website"
                    class="block flex-1 outline-none border-none bg-transparent text-gray-900 placeholder:text-gray-400 sm:text-sm sm:leading-6"
                    placeholder="www.example.com"
                  />
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <form [formGroup]="productSale" class="grid grid-cols-1 gap-2 my-4">
        <div class="flex items-center border-2 my-2 py-2 px-3 rounded-2xl">
          <input
            class="pl-2 w-full outline-none border-none"
            formControlName="name"
            placeholder="Nombre del Producto"
          />
        </div>

        <div class="relative inline-flex">
          <svg
            class="w-2 h-2 absolute top-0 right-0 m-4 pointer-events-none"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 412 232"
          >
            <path
              d="M206 171.144L42.678 7.822c-9.763-9.763-25.592-9.763-35.355 0-9.763 9.764-9.763 25.592 0 35.355l181 181c4.88 4.882 11.279 7.323 17.677 7.323s12.796-2.441 17.678-7.322l181-181c9.763-9.764 9.763-25.592 0-35.355-9.763-9.763-25.592-9.763-35.355 0L206 171.144z"
              fill="#648299"
              fill-rule="nonzero"
            />
          </svg>
          <select
            formControlName="unidadmedida"
            class="w-full border border-gray-300 rounded-full text-gray-600 h-10 pl-5 pr-10 bg-white hover:border-gray-400 focus:outline-none appearance-none"
          >
          <option value="">Seleccione la unidad de medida</option>
            <option *ngFor="let unit of munits" [value]="unit.id">
              {{ unit.name }}
            </option>
          </select>
        </div>

        <div class="relative inline-flex">
          <svg
            class="w-2 h-2 absolute top-0 right-0 m-4 pointer-events-none"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 412 232"
          >
            <path
              d="M206 171.144L42.678 7.822c-9.763-9.763-25.592-9.763-35.355 0-9.763 9.764-9.763 25.592 0 35.355l181 181c4.88 4.882 11.279 7.323 17.677 7.323s12.796-2.441 17.678-7.322l181-181c9.763-9.764 9.763-25.592 0-35.355-9.763-9.763-25.592-9.763-35.355 0L206 171.144z"
              fill="#648299"
              fill-rule="nonzero"
            />
          </svg>
          <select
            (change)="getSubCategories()"
            formControlName="category"
            class="w-full border border-gray-300 rounded-full text-gray-600 h-10 pl-5 pr-10 bg-white hover:border-gray-400 focus:outline-none appearance-none"
          >
          <option value="">Seleccione la categoria</option>
            <option *ngFor="let item of categories" [value]="item.id">
              {{ item.name }}
            </option>
          </select>
        </div>
        <div class="relative inline-flex">
          <svg
            class="w-2 h-2 absolute top-0 right-0 m-4 pointer-events-none"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 412 232"
          >
            <path
              d="M206 171.144L42.678 7.822c-9.763-9.763-25.592-9.763-35.355 0-9.763 9.764-9.763 25.592 0 35.355l181 181c4.88 4.882 11.279 7.323 17.677 7.323s12.796-2.441 17.678-7.322l181-181c9.763-9.764 9.763-25.592 0-35.355-9.763-9.763-25.592-9.763-35.355 0L206 171.144z"
              fill="#648299"
              fill-rule="nonzero"
            />
          </svg>
          <select
            formControlName="subcategory"
            class="w-full border border-gray-300 rounded-full text-gray-600 h-10 pl-5 pr-10 bg-white hover:border-gray-400 focus:outline-none appearance-none"
          >
          <option value="">Seleccione la sub-categoria</option>
            <option *ngFor="let item of subcategories" [value]="item.id">
              {{ item.name }}
            </option>
          </select>
        </div>
        <div class="relative inline-flex">
            <svg
              class="w-2 h-2 absolute top-0 right-0 m-4 pointer-events-none"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 412 232"
            >
              <path
                d="M206 171.144L42.678 7.822c-9.763-9.763-25.592-9.763-35.355 0-9.763 9.764-9.763 25.592 0 35.355l181 181c4.88 4.882 11.279 7.323 17.677 7.323s12.796-2.441 17.678-7.322l181-181c9.763-9.764 9.763-25.592 0-35.355-9.763-9.763-25.592-9.763-35.355 0L206 171.144z"
                fill="#648299"
                fill-rule="nonzero"
              />
            </svg>
            <select
              formControlName="brand"
              class="w-full border border-gray-300 rounded-full text-gray-600 h-10 pl-5 pr-10 bg-white hover:border-gray-400 focus:outline-none appearance-none"
            >
            <option value="">Seleccione la marca</option>
              <option *ngFor="let item of brands" [value]="item.id">
                {{ item.name }}
              </option>
            </select>
          </div>
      </form>
    </div>
  </div>
</div>
<div
  class="flex flex-col w-full justify-center my-2 gap-2 px-4 py-4"
  mat-dialog-actions
>
  <button
    class="p-3 rounded-full w-full text-white font-semibold text-xl"
    [ngClass]="productSale.invalid ? 'bg-neutral-300' : 'bg-neutral-500'"
    [disabled]="productSale.invalid"
    (click)="onSubmit()"
  >
  Añadir producto
  </button>
</div>
